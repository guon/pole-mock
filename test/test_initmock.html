<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Test pole.initMock()</title>
<link rel="stylesheet" href="../bower_components/qunit/qunit/qunit.css" />
</head>

<body>

<div id="qunit"></div>
<div id="qunit-fixture"></div>

<script type="text/javascript" src="../bower_components/qunit/qunit/qunit.js"></script>
<script type="text/javascript" src="../bower_components/requirejs/require.js"></script>
<script type="text/javascript">
(function() {
    requirejs.config({
        baseUrl: '../src',
        paths: {
            mustache: '../bower_components/mustache/mustache',
            dot: '../bower_components/doT/doT'
        }
    });

    require(['core', 'mock'], function(pole) {
        module('Test pole.initMock()');

        asyncTest('普通mock配置项', function() {
            pole.initMock('data/mock-config', function() {
                ok(pole.url('main'), 'mock data url');
                ok(pole.tpl('templateMustache'), 'mustache模板');
                start();
            });
        });

        asyncTest('设置自定义模板', function() {
            pole.initMock('data/mock-config-custom', function() {
                equal(pole.defaultTemplateEngine, 'doT', '自定义模板引擎');
                ok(pole.tpl('templateMustache'), 'mustache模板');
                ok(pole.tpl('templateDoT'), 'doT模板');
                start();
            });
        });
    });
}());
</script>

</body>
</html>